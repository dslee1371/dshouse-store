:root{
  --bg:#f8fafc; --card:#ffffff; --text:#0f172a; --muted:#6b7280; --border:#e5e7eb;
  --brand:#0ea5e9; --brand-strong:#0284c7;
  --accent:#111827; --radius:14px; --shadow:0 2px 10px rgba(2,8,23,.06);
  --good:#16a34a; --bad:#b91c1c;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:'Inter','Noto Sans KR',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}

/* Header */
.header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);z-index:50}
.header-inner{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:minmax(260px,auto) 1fr auto;gap:16px;align-items:center;padding:14px 20px}
.brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text);font-weight:800;font-size:20px}
.brand .brand-mark{display:inline-flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:9px;background:linear-gradient(135deg,var(--brand),#38bdf8);color:#fff}
.brand-area{display:flex;align-items:center;gap:10px}
.user-chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#f1f5f9;font-size:13px;color:var(--text)}
.brand.small{font-weight:700;font-size:16px}
.search{display:flex}
.search input{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#fff}
.nav{display:flex;gap:12px}
.nav a{color:var(--text);text-decoration:none;padding:8px 12px;border-radius:10px}
.nav a.highlight{background:#111;color:#fff}

/* Layout */
.container{max-width:1100px;margin:24px auto;padding:0 20px}

/* Hero */
.hero{display:grid;grid-template-columns:1.4fr 1fr;gap:20px;align-items:center;background:linear-gradient(135deg,#ecfeff,#e0f2fe);border:1px solid var(--border);box-shadow:var(--shadow);border-radius:20px;padding:28px}
.hero h1{font-size:28px;margin:0 0 6px}
.hero p{color:var(--muted);margin:0 0 14px}
.hero .cta{display:flex;gap:10px}

/* Cards */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:18px}
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);transition:transform .15s ease, box-shadow .15s ease}
.card:hover{transform:translateY(-2px);box-shadow:0 10px 24px rgba(2,8,23,.08)}
.card .img-wrap{position:relative;aspect-ratio:4/5;overflow:hidden;background:#fff}
.card .img-wrap img{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}
.card:hover .img-wrap img{transform:scale(1.04)}
.card .badge{position:absolute;top:10px;left:10px;background:rgba(15,23,42,.85);color:#fff;font-size:12px;padding:6px 8px;border-radius:999px}
.card .p{padding:14px}
.card .title{font-weight:700;margin:0 0 6px;line-height:1.3}
.card .meta{display:flex;align-items:center;justify-content:space-between}
.card .price{font-weight:800}

/* Buttons */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid #111;background:#111;color:#fff;text-decoration:none;font-weight:700}
.btn.ghost{background:#fff;color:#111;border-color:var(--border)}
.btn.brand{background:var(--brand);border-color:var(--brand-strong)}
.btn.small{padding:6px 10px;border-radius:10px;font-weight:600}
/* Better focus & disabled states */
:focus-visible{outline:2px solid var(--brand);outline-offset:2px}
.btn[disabled]{opacity:.6;cursor:not-allowed}
input,select,textarea{outline:none}
input:focus,select:focus,textarea:focus{box-shadow:0 0 0 3px rgba(2,132,199,.15)}

/* Toast */
.toast{position:fixed;left:50%;top:16px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:12px;box-shadow:var(--shadow);z-index:60}

/* Sticky CTA (mobile) */
@media (max-width: 640px){
  .sticky-cta{position:sticky;bottom:8px}
}

/* Product page */
.product-grid{display:grid;grid-template-columns:1.2fr 1fr;gap:24px}
.main-image{position:relative;overflow:hidden;border:1px solid var(--border);border-radius:16px;background:#fff;box-shadow:var(--shadow)}
.main-image img{width:100%;height:min(70vh,720px);object-fit:contain;user-select:none;will-change:transform;touch-action:none}
.thumbs{display:flex;gap:10px;overflow-x:auto;padding-top:10px}
.thumbs img{width:100px;height:100px;object-fit:cover;border-radius:10px;border:2px solid transparent;cursor:pointer;background:#fff}
.thumbs img.active{border-color:#111}
.can-zoom-in{cursor:zoom-in}
.can-zoom-out{cursor:zoom-out}
.grabbable{cursor:grab}
.grabbing{cursor:grabbing}

.price-block{display:flex;align-items:flex-end;gap:10px;margin:10px 0 6px}
.price-lg{font-size:26px;font-weight:900}
.stock-ok{color:var(--good);font-weight:700}
.stock-bad{color:var(--bad);font-weight:700}
.stock-pill{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);padding:6px 10px;border-radius:999px;background:#fff;color:var(--muted);font-size:13px}
.stock-pill.good{border-color:#d1fae5;color:#065f46;background:#ecfdf5}
.stock-pill.bad{border-color:#fee2e2;color:#7f1d1d;background:#fef2f2}

/* Checkout */
.notice-card{margin-top:16px;padding:16px;border:1px dashed var(--brand-strong);background:#f0f9ff;border-radius:14px}
.notice-card .title{font-weight:800;margin:0 0 8px}
.notice-card .bank{font-family:ui-monospace,Menlo,Consolas,monospace;font-weight:800}

/* Admin variant builder */
.variant-builder{margin-top:12px;padding:12px;border:1px solid var(--border);border-radius:14px;background:#fff}
.variant-row{display:grid;grid-template-columns:1fr 1fr 120px 90px;gap:10px;align-items:center}
.variant-row input{width:100%;padding:10px;border:1px solid var(--border);border-radius:10px}
.variant-row .remove{justify-self:end}

/* Auth banner */
.auth-banner{display:flex;align-items:center;gap:10px;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#ecfeff;margin-bottom:14px}
.auth-banner .right{margin-left:auto;display:flex;gap:8px}

/* Footer */
.footer{margin-top:40px;border-top:1px solid var(--border);background:#fff}
.footer-inner{max-width:1100px;margin:0 auto;padding:22px 20px;display:grid;grid-template-columns:1.2fr 1fr 1fr;gap:20px}
.footer .muted{color:var(--muted)}
.f-title{font-weight:800;margin-bottom:8px}
.brand.small{display:flex;align-items:center;gap:8px}

.copyright{border-top:1px solid var(--border);padding:12px 20px;text-align:center;color:var(--muted);font-size:14px}

@media (max-width: 900px){
  .header-inner{grid-template-columns:1fr auto;gap:10px}

  .search{display:none}
  .hero{grid-template-columns:1fr;padding:18px}
  .product-grid{grid-template-columns:1fr}
  .main-image img{height:420px}
}

/* 주소검색 버튼 UX 업그레이드 */
.addr-search{
  position:relative;
  border-style:dashed; /* 평소엔 점선 */
  transition:
    transform .12s ease,
    box-shadow .12s ease,
    background-color .12s ease,
    border-color .12s ease;
}
.addr-search .icon{
  display:inline-block;
  margin-right:6px;
  transition: transform .12s ease;
}

/* 마우스 오버/키보드 포커스 시: 강조 */
.addr-search:is(:hover, :focus-visible, .is-hover, .is-focus){
  border-color: var(--brand, #5b7fff);
  background: rgba(91,127,255,.08);
  box-shadow: 0 6px 16px rgba(0,0,0,.08);
  transform: translateY(-1px);
}
.addr-search:is(:hover, :focus-visible, .is-hover, .is-focus) .icon{
  transform: scale(1.08);
}

/* 클릭/열림(active) 상태 */
.addr-search:is(:active, .is-active){
  transform: translateY(0) scale(.98);
  box-shadow: 0 3px 10px rgba(0,0,0,.06);
}

/* 은은한 포커스 링 */
.addr-search::after{
  content:'';
  position:absolute; inset:0;
  border:2px solid transparent;
  border-radius:12px;
  transition: border-color .12s ease;
  pointer-events:none;
}
.addr-search:is(:hover, :focus-visible, .is-hover, .is-focus)::after{
  border-color: rgba(91,127,255,.35);
}

/* 모션 최소화 환경 배려 */
@media (prefers-reduced-motion: reduce){
  .addr-search, .addr-search .icon { transition:none; }
}
